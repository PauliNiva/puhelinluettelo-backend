(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{20:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var c=t(1),u=t(15),r=t.n(u),a=(t(20),t(6)),o=t(3),i=t(0),s=function(e){return Object(i.jsxs)("form",{onSubmit:e.addPerson,children:[Object(i.jsxs)("div",{children:["name: ",Object(i.jsx)("input",{value:e.newName,onChange:e.handleNameChange})]}),Object(i.jsxs)("div",{children:["number: ",Object(i.jsx)("input",{value:e.newNumber,onChange:e.handleNumberChange})]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{type:"submit",children:"add"})})]})},l=function(e){var n=e.persons,t=e.remove;return Object(i.jsxs)("p",{children:[n.name," ",n.number," ",Object(i.jsx)("button",{onClick:function(){return t(n)},children:"delete"})]})},j=function(e){var n=e.persons,t=e.filter,c=e.remove;return n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())})).map((function(e){return Object(i.jsx)(l,{persons:e,remove:c},e.name)}))},d=function(e){return Object(i.jsxs)("p",{children:["filter shown with ",Object(i.jsx)("input",{value:e.filter,onChange:e.onFilterChange})]})},b=t(4),f=t.n(b),m="/api/persons",h=function(){return f.a.get(m).then((function(e){return e.data}))},O=function(e){return f.a.post(m,e).then((function(e){return e.data}))},v=function(e,n){return f.a.put("".concat(m,"/").concat(e),n).then((function(e){return e.data}))},p=function(e){return f.a.delete("".concat(m,"/").concat(e))},x=function(e){var n=e.message,t=e.success;return null===n?null:!0===t?Object(i.jsx)("div",{className:"success",children:n}):Object(i.jsx)("div",{className:"error",children:n})},w=function(){var e=Object(c.useState)([]),n=Object(o.a)(e,2),t=n[0],u=n[1],r=Object(c.useState)(""),l=Object(o.a)(r,2),b=l[0],f=l[1],m=Object(c.useState)(""),w=Object(o.a)(m,2),g=w[0],C=w[1],N=Object(c.useState)(""),S=Object(o.a)(N,2),k=S[0],y=S[1],T=Object(c.useState)(null),D=Object(o.a)(T,2),P=D[0],E=D[1],F=Object(c.useState)(null),I=Object(o.a)(F,2),J=I[0],L=I[1];Object(c.useEffect)((function(){h().then((function(e){u(e)}))}),[]);var A=function(e){if(window.confirm("".concat(e.name," is already in the phonebook.\n      Do you want to replace the old number with a new one?"))){var n=t.find((function(n){return n.name===e.name})),c=Object(a.a)(Object(a.a)({},n),{},{number:g});v(c.id,c).then((function(c){u(t.map((function(e){return e.id!==n.id?e:c}))),L(!0),E("Updated ".concat(e.name)),setTimeout((function(){E(null),L(null)}),5e3)})).catch((function(e){L(!1),E("Information of '".concat(n.name,"' has already been removed from server")),setTimeout((function(){E(null),L(null)}),5e3)}))}};return Object(i.jsxs)("div",{children:[Object(i.jsx)("h2",{children:"Phonebook"}),Object(i.jsx)(x,{message:P,success:J}),Object(i.jsx)(d,{filter:k,onFilterChange:function(e){y(e.target.value)}}),Object(i.jsx)("h3",{children:"add a new"}),Object(i.jsx)(s,{addPerson:function(e){e.preventDefault();var n={name:b,number:g};t.some((function(e){return e.name===b}))?A(n):(O(n).then((function(e){u(t.concat(e))})),L(!0),E("Added ".concat(n.name)),setTimeout((function(){E(null),L(null)}),5e3)),f(""),C("")},handleNameChange:function(e){f(e.target.value)},handleNumberChange:function(e){C(e.target.value)},newName:b,newNumber:g}),Object(i.jsx)("h3",{children:"Numbers"}),Object(i.jsx)(j,{persons:t,filter:k,remove:function(e){window.confirm("Delete ".concat(e.name,"?"))&&p(e.id).then((function(){u(t.filter((function(n){return n.id!==e.id}))),L(!0),E("Removed ".concat(e.name)),setTimeout((function(){E(null),L(null)}),5e3)}))}})]})};r.a.render(Object(i.jsx)(w,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.a165b0b5.chunk.js.map